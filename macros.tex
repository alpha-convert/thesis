\newcommand{\tytrans}[1]{\llbracket #1 \rrbracket}
\newcommand{\tertrans}[1]{\left\lVert#1\right\rVert}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\angles}[1]{\left\llangle #1 \right\rrangle}
\newcommand{\eval}{\downarrow}
\newcommand{\val}{\texttt{val}}
\newcommand{\bdby}{\sqsubseteq}
\newcommand{\wknto}{\sqsubseteq}
\newcommand{\valbd}{\sqsubseteq_{\texttt{val}}}
\newcommand{\subbd}{\sqsubseteq_{\texttt{sub}}}
\newcommand{\subst}[2]{\left[#1 \middle/ #2 \right]}

\newcommand{\savename}{\ensuremath{\texttt{save}}}
\newcommand{\xfername}{\ensuremath{\texttt{transfer}}}
\newcommand{\waitname}[0]{\ensuremath{\texttt{create}}}
\newcommand{\discname}{\texttt{spend}}
\let\createname\waitname
\let\spendname\discname
\newcommand{\save}[3]{\ensuremath{\texttt{save}^{#1}_{#2} \; #3}}
\newcommand{\disc}[2]{\ensuremath{\texttt{disc}_{#1} \; #2}}
\newcommand{\wait}[2]{\ensuremath{\texttt{wait}_{#1} \; #2}}
\newcommand{\tsfer}[6]{\ensuremath{\texttt{transfer}_{#1} \, !^{#2}_{#3} \, #4 = #5 \; \texttt{to} \; #6}}
\newcommand{\case}[5]{\ensuremath{\texttt{case} \, (#1,\, #2. #3 \, , \, #4 . #5})}
\newcommand{\inl}[1]{\ensuremath{\texttt{inl} \, #1}}
\newcommand{\inr}[1]{\ensuremath{\texttt{inr} \, #1}}
\newcommand{\elist}{\ensuremath{\texttt{[]}}}
\newcommand{\cons}[2]{\ensuremath{#1 \, :: \, #2}}
\newcommand{\listty}[1]{\ensuremath{\texttt{[}#1\texttt{]}}}
\newcommand{\delay}[1]{\ensuremath{\texttt{delay} \, #1}}
\newcommand{\susp}[1]{\ensuremath{\texttt{susp} \, #1}}
\newcommand{\force}[1]{\ensuremath{\texttt{force} \, #1}}
\newcommand{\psplit}[4]{\ensuremath{\texttt{split}(#1, \, #2.#3.#4)}}
\newcommand{\unit}{\ensuremath{\texttt{()}}}
\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\nrec}[3]{\ensuremath{\texttt{nrec}\left(#1,#2,#3\right)}}
\newcommand{\lrec}[3]{\ensuremath{\texttt{lrec}\left(#1,#2,#3\right)}}
\newcommand{\inj}{\overline}
\newcommand{\tick}[1]{\ensuremath{\texttt{tick} \; \, ; \; #1}}
\newcommand{\amp}{\ensuremath{\&}}
\newcommand{\amppair}[2]{\ensuremath{\langle #1,#2 \rangle}}
\newcommand{\scott}[1]{\ensuremath{\llbracket #1 \rrbracket}}
\newcommand{\snrec}{\ensuremath{\texttt{snrec}}}
\newcommand{\slrec}{\ensuremath{\texttt{slrec}}}
\newcommand{\scase}{\ensuremath{\texttt{scase}}}
\newcommand{\ret}[1]{\ensuremath{\texttt{ret} \, #1}}
\newcommand{\attach}[1]{\ensuremath{\texttt{attach} \, #1}}
\newcommand{\asplit}[5]{\ensuremath{\texttt{split}_{#1}(#2, \, #3.#4.#5)}}
\newcommand{\ccase}[5]{\ensuremath{\texttt{case} \, (#1,\, #2. #3 \, , \, #4 . #5})}
\newcommand{\acase}[6]{\ensuremath{\texttt{case}_{#1} \, (#2,\, #3. #4 \, , \, #5 . #6})}

\newcommand{\bbbc}{\mathbb{C}}
\newcommand{\tree}[1]{\ensuremath{\texttt{tree}\left(#1\right)}}
\newcommand{\trec}[6]{\ensuremath{\texttt{trec}\left(#1,#2,#3,#4,#5,#6\right)}}
\newcommand{\set}[1]{\ensuremath{\texttt{set}\left(#1\right)}}
\newcommand{\pack}[3]{\ensuremath{\texttt{pack}_{#1 = #2} #3}}
\newcommand{\unpack}[4]{\ensuremath{\texttt{unpack } (#1,#2) = #3 \texttt{ in } #4}}
\newcommand{\toC}[1]{\ensuremath{\text{to}\mathbb{C}(#1)}}


\DeclareMathOperator{\wb}{WB}
\DeclareMathOperator{\wbc}{WBc}
\DeclareMathOperator{\Hom}{Hom}

\newcommand{\loli}{\multimap}
\newcommand{\tensor}{\otimes}
\newcommand{\proves}{\vdash}
\newcommand{\ang}{^{\circ}}

\newcommand{\curry}[1]{\ensuremath{\text{curry}\left(#1\right)}}
\newcommand{\const}[1]{\ensuremath{\text{const} \left(#1\right)}}

\newcommand{\ds}{\ensuremath{\$}}

\newcommand{\gens}{\Rightarrow}
\newcommand{\infers}{\uparrow}
\newcommand{\checks}{\downarrow}
\newcommand{\M}{\mathbb{M}}
\newcommand{\subty}{<:}
\newcommand{\subtynf}{<:_{\texttt{nf}}}

\newcommand{\fv}{\texttt{fv}}
\newcommand{\bv}{\texttt{bv}}

\newcommand{\citehere}{\color{red}[cite]\color{black}}

\newcommand{\red}[1]{\color{red}#1\color{black}}

\newcommand{\lambdaamor}{$\lambda$-Amor\xspace}
\newcommand{\lambdaamorminus}{$\lambda-\text{Amor}^{-}$\xspace}
\newcommand{\dlambdaamor}{d$\lambda$-Amor\xspace}
\newcommand{\bilambdaamor}{bi$\lambda$-Amor\xspace}
\newcommand{\lambdaA}{$\lambda^A$\xspace}
\newcommand{\lambdaamorimpl}{\texttt{LambdaAmor}\xspace}

\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}


\newcommand{\potvec}{\vec{\mathbb{R}^+}}

\newcommand{\pvdash}{\vdash_p}

\newcommand{\codeInc}{\texttt{inc}}
\newcommand{\codeSet}{\texttt{set}}
\newcommand{\codebitlist}{\texttt{bit\ list}}
\newcommand{\codenat}{\texttt{nat}}


%
\hypersetup{pdftex, backref = true, colorlinks = true, allcolors = {blue}}

%theorems

\newcommand{\jtheorem}[2]{
  \vspace{0.5em}

  % \noindent\fcolorbox{CadetBlue}{white}{#1}
  %{\color{CadetBlue}\hrule height 0.5pt}

  \vspace{0.25em}

  \noindent \textbf{#1}

  \vspace{0.25em}

  %{\color{CadetBlue}\hrule height 0.5pt}

  \vspace{0.5em}

  \noindent #2 \qed

  \vspace{1em}
}

\newcommand{\jtref}[1]
  {\textsc{#1}}

\newmdenv[
  usetwoside=false,
  topline=false,
  bottomline=false,
  rightline=false,
  leftmargin=0.2in,
  linewidth=0.75pt,
  skipabove=\topsep,
  skipbelow=\topsep,
  nobreak=false
]{leftrule}

\newcommand{\allrule}[1]{
  \vspace{\topsep}

  \noindent\hspace{10pt}\fbox{#1}

  \vspace{\topsep}
}

\newcommand{\jgivengoal}[2]{
  \vspace{0.5em}

  {
    \setlength{\parskip}{0em}
    \noindent $\blacktriangleright$ \textbf{Given:}
    {
      %\setlength{\parskip}{0.7em}
      \begin{adjustwidth}{0.1in}{0in}
        #1
      \end{adjustwidth}
      %\vspace{0.7em}
    }

    \noindent $\blacktriangleright$ \textbf{Goal:}

    %\vspace{0.35em}

    \begin{adjustwidth}{0.1in}{0in}
      \allrule{#2}
    \end{adjustwidth}

    %\vspace{0.35em}
  }
  \noindent \ignorespaces
}

\newcommand{\jgivengoalTwo}[3]{
  \vspace{0.5em}

  {
    \setlength{\parskip}{0em}
    \noindent $\blacktriangleright$ \textbf{Given:}
    {
      %\setlength{\parskip}{0.7em}
      \begin{adjustwidth}{0.1in}{0in}
        #1
      \end{adjustwidth}
      %\vspace{0.7em}
    }

    \noindent $\blacktriangleright$ \textbf{Goal A:}

    %\vspace{0.35em}

    \begin{adjustwidth}{0.1in}{0in}
      \allrule{#2}
    \end{adjustwidth}

    %\vspace{0.35em}

    \noindent $\blacktriangleright$ \textbf{Goal B:}

    %\vspace{0.35em}

    \begin{adjustwidth}{0.1in}{0in}
      \allrule{#3}
    \end{adjustwidth}

    %\vspace{0.35em}
  }
  \noindent \ignorespaces
}

\newcommand{\jgivengoalThree}[4]{
  \vspace{0.5em}

  {
    \setlength{\parskip}{0em}
    \noindent $\blacktriangleright$ \textbf{Given:}
    {
      %\setlength{\parskip}{0.7em}
      \begin{adjustwidth}{0.1in}{0in}
        #1
      \end{adjustwidth}
      %\vspace{0.7em}
    }

    \noindent $\blacktriangleright$ \textbf{Goal 1:}

    %\vspace{0.35em}

    \begin{adjustwidth}{0.1in}{0in}
      \allrule{#2}
    \end{adjustwidth}

    %\vspace{0.35em}

    \noindent $\blacktriangleright$ \textbf{Goal 2:}

    %\vspace{0.35em}

    \begin{adjustwidth}{0.1in}{0in}
      \allrule{#3}
    \end{adjustwidth}
    
    \noindent $\blacktriangleright$ \textbf{Goal 3:}

    %\vspace{0.35em}

    \begin{adjustwidth}{0.1in}{0in}
      \allrule{#4}
    \end{adjustwidth}

    %\vspace{0.35em}
  }
  \noindent \ignorespaces
}

\newcommand{\jcase}[3]{
  %\vspace{0.7em}

  \noindent $\blacktriangleright$ \textbf{Case #1:} \textit{#2.}

  {
    %\setlength{\parskip}{0.7em}
    \begin{leftrule}
      \vspace{0.35em}
      #3
    \end{leftrule}
  }
  
  \vspace{0.7em}

  \noindent \ignorespaces
}

\newcommand{\jnocase}[1]{
  {
    \setlength{\parskip}{0.7em}
    #1
  }
}

\newcommand{\jsubcase}[3]{
  \noindent $\blacktriangleright$ \textbf{Subcase #1:} \textit{#2.}

  {
    %\setlength{\parskip}{0.7em}
    \begin{adjustwidth}{0.2in}{0in}
      #3
    \end{adjustwidth}
  }

  \noindent \ignorespaces
}


\newcommand{\caseText}[1]
  {\noindent #1}

\newcommand{\caseFact}[1]
  % {\\[2pt]\makebox[0.40in][r]{(#1)\ \ }}
  {\noindent \hspace{10pt}(#1)\hspace{5pt}}

\newcommand{\caseFactPl}[1]
  % {\\[2pt]\makebox[0.60in][r]{(#1)\ \ }}
  {\caseFact{#1}}

