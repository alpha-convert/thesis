\jtheorem{Proof of \autoref{thm:raw-idx-idx-subst}}{
By induction on the derivation of $\Theta, j : S_1 ; \Delta \vdash I : S_2$. The case for I-Var is immediate.

\jcase{1}{I-Plus}{
\jgivengoal{
    \caseFact{1} $\Theta, j : S_1 ; \Delta \vdash I_1 + I_2 : bS$
    
    \caseFact{2} $\Theta, j : S_1 ; \Delta \vdash I_1: bS$
    
    \caseFact{3} $\Theta, j : S_1 ; \Delta \vdash I_2 : bS$
    
    \caseFact{4} $\Theta \vdash \Delta \; \texttt{wf}$
  }{
      $\Theta ; \Delta[J/j] \vdash (I + J) [J/j] : bS$
  }
  \caseText{By IH on (2) and (3)}
  
  \caseFact{5} $\Theta ; \Delta[J/j] \vdash I_1[J/j] : bS$
  
  \caseFact{6} $\Theta ; \Delta[J/j] \vdash I_2[J/j] : bS$
  
  \caseText{By I-Plus}
  
  \caseFact{7} $\Theta ; \Delta[J/j] \vdash I_1[J/j] + I_2[J/j]: bS$
  
  \caseText{Goal follows by (7).}
}

\jcase{2}{I-Minus}{
\jgivengoal{
    \caseFact{1} $\Theta, j : S_1 ; \Delta \vdash I_1 - I_2 : bS$
    
    \caseFact{2} $\Theta, j : S_1 ; \Delta \vdash I_1: bS$
    
    \caseFact{3} $\Theta, j : S_1 ; \Delta \vdash I_2 : bS$
    
    \caseFact{4} $\Theta, j : S_1 ; \Delta \vDash I_1 \geq I_2$
    
    \caseFact{5} $\Theta \vdash \Delta \; \texttt{wf}$
  }{
      $\Theta ; \Delta[J/j] \vdash (I+1 - I_2) [J/j] : bS$
  }
  \caseText{By IH on (2) and (3)}
  
  \caseFact{5} $\Theta ; \Delta[J/j] \vdash I_1[J/j] : bS$
  
  \caseFact{6} $\Theta ; \Delta[J/j] \vdash I_2[J/j] : bS$
  
  \caseText{Instantiating the quantifier in (4) and using (5)}
  
  \caseFact{7} $\Theta ; \Delta[J/j] \vDash I_1[J/j] \geq I_2[J/j]$
  
  \caseText{By I-Minus on (5) (6) (7)}
  
  \caseFact{8} $\Theta ; \Delta[J/j] \vdash I_1[J/j] - I_2[J/j]: bS$
  
  \caseText{Goal follows by (8).}
}

\jcase{3}{I-Times-$\R^+$}{
 \jgivengoal{
   \caseFact{1} $\Theta, j : S_1 ; \Delta \vdash c \cdot I : \R^+$
   
   \caseFact{2} $\Theta, j : S_1 ; \Delta \vdash I : \R^+$
   
   \caseFact{3} $c \in \R^+$
 }{
   $\Theta ; \Delta[I/i] \vdash (c \cdot I)[J/j] : \R^+$
 }
 \caseText{By IH on (2)}
 
 \caseFact{4} $\Theta ; \Delta[J/j] \vdash I[J/j] : \R^+$
 
 \caseText{By I-Times-$\R^+$ on (3) and (4)}
 
 \caseFact{5} $\Theta ; \Delta[J/j] \vdash c \cdot I[J/j] : \R^+$
 
 \caseText{Goal follows by (5)}
}

\jcase{4}{I-Times-$\potvec$}{Identical to I-Times-$\R^+$}

\jcase{5}{I-Times-$\N$}{Identical to I-Times-$\R^+$}

\jcase{6}{I-Shift}{
  \jgivengoal{
    \caseFact{1} $\Theta, j : S ; \Delta \vdash \lhd I : \potvec$
    
    \caseFact{2} $\Theta, j : S ; \Delta \vdash I : \potvec$
  }{
    $\Theta ; \Delta[J/j] \vdash \left(\lhd I\right)[J/j] : \potvec$
  }
  
  \caseText{By IH on (2)}
  
  \caseFact{3} $\Theta ; \Delta[J/j] \vdash I[J/j] : \potvec$
  
  \caseText{By I-Shift on (3)}
  
  \caseFact{4} $\Theta ; \Delta[J/j] \vdash \lhd I[J/j] : \potvec$
  
  \caseText{Goal follows immediately from (4)}
}

\jcase{7}{I-Lam}{
  \jgivengoal{
    \caseFact{1} $\Theta, j : S_1 ; \Delta \vdash \lambda i : S_2. I : S_2 \to S_3$
    
    \caseFact{2} $\Theta, j : S_1, i : S_2 ; \Delta \vdash I : S_3$
  }{
    $\Theta ; \Delta[J/j] \vdash \lambda i : S_2. I[J/j] : S_2 \to S_3$  
  }
  
  \caseText{By IH on (2)}
  
  \caseFact{3} $\Theta, i : S_2 ; \Delta[J/j] \pvdash I[J/j] : S_3$
  
  \caseText{By I-Lam on (3)}
  
  \caseFact{4} $\Theta ; \Delta[J/j] \vdash \lambda i : S_2. I[J/j] : S_2 \to S_3$
  
  \caseText{Goal follows immediately by (4)}
}

\jcase{8}{I-App}{
  \jgivengoal{
    \caseFact{1} $\Theta, j : S ; \Delta \vdash I_1 \; I_2 : S_2$
    
    \caseFact{2} $\Theta, j : S; \Delta \vdash I_1 : S_1 \to S_2$
    
    \caseFact{3} $\Theta, j : S; \Delta \vdash I_2 : S_1$
  }{
    $\Theta ; \Delta[J/j] \vdash (I_1 \; I_2)[J/j] : S_2$,
  }
  
  \caseText{By IH on (2) and (3)}
  
  \caseFact{4} $\Theta ; \Delta[J/j] \vdash I_1[J/j] : S_1 \to S_2$
  
  \caseFact{5} $\Theta ; \Delta[J/j] \vdash I_2[J/j] : S_1$
  
  \caseText{By I-App on (4) and (5)}
   
  \caseFact{6} $\Theta ; \Delta[J/j] \vdash I_1[J/j] \; I_2[J/j] : S_2$
  
  \caseText{Goal follows from (6)}
}

\jcase{9}{I-Const}{
  \jgivengoal{
     \caseFact{1} $\Theta, j : S ; \Delta \vdash \texttt{const}(I) : \potvec$
     
     \caseFact{2} $\Theta, j : S ; \Delta \vdash I : \R^+$
  }{
    $\Theta ; \Delta[J/j] \vdash \texttt{const}(I)[J/j] : \potvec$
  }
  \caseText{By IH on (2)}
  
  \caseFact{3} $\Theta ; \Delta[J/j] \vdash I[J/j] : \R^+$
  
  \caseText{By I-Const on (3)}
  
  \caseFact{4} $\Theta ; \Delta[J/j] \vdash \texttt{const}(I[J/j]) : \potvec$
  
  \caseText{Goal follows from (4)}
}

\jcase{10}{I-$\N$-Lit} {Immediate.}

\jcase{11}{I-$\R^+$-Lit} {Immediate.}

\jcase{12}{I-$\potvec$-Lit} {Immediate.}
}
\iffalse
\begin{proof}
By induction on the derivation of $\Theta, j : S_1 ; \Delta \vdash I : S_2$.
\begin{itemize}
  \item[(I-Var)] Immediate.
  \item[(I-Plus)] Suppose $\Theta, j : S_1 ; \Delta \vdash I_1 + I_2 : bS$ by way of
  $\Theta, j : S_1 ; \Delta \vdash I_1: bS$ and
  $\Theta, j : S_1 ; \Delta \vdash I_2 : bS$.
  Applying IH twice, we have that
   and
  $\Theta ; \Delta \pvdash I_2[J/j] : bS$.
  By I-Plus, $\Theta ; \Delta \pvdash I_1[J/j] + I_2[J/j]: bS$, as required.
  \item[(I-Minus)] Suppose $\Theta, j : S_1 ; \Delta \vdash I_1 - I_2 : bS$ by way of
  $\Theta, j : S_1 ; \Delta \vdash I_1: bS$,
  $\Theta, j : S_1 ; \Delta \vdash I_2 : bS$, and
  $\Theta, j : S_1 ; \Delta \vDash I_1 \geq I_2$
  Applying IH twice, we have that
  $\Theta ; \Delta \pvdash I_1[J/j] : bS$ and
  $\Theta ; \Delta \pvdash I_2[J/j] : bS$.
  Moreover, we have $\Theta ; \Delta \vDash \forall j : S_1. (I_1 \geq I_2)$ since $\Theta \vdash \Delta \; \texttt{wf}$, and so
  $\Theta ; \Delta \vDash I_1[J/j] \geq I_2[J/j]$
  By I-Minus, $\Theta ; \Delta \pvdash I_1[J/j] - I_2[J/j]: bS$, as required.
  \item[(I-Times-$\R^+$)] Suppose $\Theta , j : S \vdash c \cdot I : \R$ from
  $\Theta, i : S \vdash I : \R$ and
  $c \in \R$.
  By IH,
  $\Theta \pvdash I[J/j] : \R$
  and so by I-Times-$\R^+$,
  $\Theta \pvdash c \cdot I[J/j] : \R$
  \item[(I-Times-$\vec{R}^+$)] Identical to I-Times-$\R^+$.
  \item[(I-Times-$\N$)] Identical to I-Times-$\R^+$.
  \item[(I-Shift)] Suppose $\Theta, j : S ; \Delta \vdash \lhd I : \potvec$ by way of $\Theta, j : S ; \Delta \vdash I : \potvec$.
  By IH,
  $\Theta ; \Delta \pvdash I[J/j] : \potvec$,
  and by I-Shift,
  $\Theta ; \Delta \pvdash \lhd I[J/j] : \potvec$
  as required.
  \item[(I-Lam)] Suppose $\Theta, j : S_1 ; \Delta \vdash \lambda i : S_2. I : S_2 \to S_3$ by way of
  $\Theta, j : S_1, i : S_2 ; \Delta \vdash I : S_3$.
  By IH,
  $\Theta, i : S_2 ; \Delta \pvdash I[J/j] : S_3$,
  and by I-Lam,
  $\Theta ; \Delta \pvdash \lambda i : S_2. I[J/j] : S_2 \to S_3$ as required.
  \item[(I-App)] Suppose $\Theta, j : S ; \Delta \vdash I_1 \; I_2 : S_2$ by way of
  $\Theta, j : S; \Delta \vdash I_1 : S_1 \to S_2$ and
  $\Theta, j : S; \Delta \vdash I_2 : S_1$.
  By IH twice, we have that
  $\Theta ; \Delta \pvdash I_1[J/j] : S_1 \to S_2$ and
  $\Theta ; \Delta \pvdash I_2[J/j] : S_1$.
  By I-App,
  $\Theta ; \Delta \pvdash I_1[J/j] \; I_2[J/j] : S_2$, as required.
  \item[(I-Const)] Suppose $\Theta, j : S ; \Delta \vdash \texttt{const}(I) : \potvec$
  by way of
  $\Theta, j : S ; \Delta \vdash I : \R$.
  By IH,
  $\Theta ; \Delta \pvdash I[J/j] : \R$,
  and so by I-Const,
  $\Theta ; \Delta \pvdash \texttt{const}(I)[J/j] : \potvec$
  as required.
  \item[(I-\* -Lit)] Immediate by the presupposition that $\Theta \vdash \Delta \; \texttt{wf}$.
\end{itemize}
\end{proof}
\fi