\jtheorem{Proof of \autoref{thm:raw-sort-sound}}{


\jgivengoal{
  \caseFact{1} $\Theta ; \Delta \vdash I : S \gens \Phi$
  
  \caseFact{2} $\Theta ; \Delta \vDash \Phi$
}{
  $\Theta ; \Delta \vdash I : S$
}

%\caseText{By induction on $\Theta ; \Delta \vdash I : S \gens \Phi$}

\jcase{1}{AI-Var}{Immediate.}

\jcase{2}{AI-Plus}{
  \jgivengoal{
    \caseFact{1} $\Theta ; \Delta \vdash I + J : bS \gens \Phi_1 \wedge \Phi_2$
    
    \caseFact{2} $\Theta ; \Delta \vDash \Phi_1 \wedge \Phi_2$
    
    \caseFact{3} $\Theta ; \Delta \vdash I : bS \gens \Phi_1$
    
    \caseFact{4} $\Theta ; \Delta \vdash J : bS \gens \Phi_2$
  }{
   $\Theta ; \Delta \vdash I + J : bS$  
  }
  
  \caseText{By IH on (3), since by (2) $\Theta ; \Delta \vDash \Phi_1$}
  
  \caseFact{5} $\Theta ; \Delta \vdash I : bS$
  
  \caseText{By IH on (4), since by (2) $\Theta ; \Delta \vDash \Phi_2$}
  
  \caseFact{6} $\Theta ; \Delta \vdash J : bS$  
  
  \caseText{Goal follows by I-Plus}
}

\jcase{3}{AI-Minus}{
  \jgivengoal{
    \caseFact{1} $\Theta ; \Delta \vdash I - J : bS \gens \Phi_1 \wedge \Phi_2 \wedge (I \geq J)$
    
    \caseFact{2} $\Theta ; \Delta \vDash \Phi_1 \wedge \Phi_2 \wedge (I \geq J)$
    
    \caseFact{3} $\Theta ; \Delta \vdash I : bS \gens \Phi_1$
    
    \caseFact{4} $\Theta ; \Delta \vdash J : bS \gens \Phi_2$
  }{
   $\Theta ; \Delta \vdash I - J : bS$    
  }
  
  \caseText{By IH on (3), since by (2) $\Theta ; \Delta \vDash \Phi_1$}
  
  \caseFact{5} $\Theta ; \Delta \vdash I : bS$
  
  \caseText{By IH on (4), since by (2) $\Theta ; \Delta \vDash \Phi_2$}
  
  \caseFact{6} $\Theta ; \Delta \vdash J : bS$  
  
  \caseText{Goal follows by I-Plus, using the fact that $\Theta ; \Delta \vDash I \geq J$ from (2)}
}

\jcase{4}{AI-Times-*}{Immediate by IH.}

\jcase{5}{AI-Shift}{
  \jgivengoal{
    \caseFact{1} $\Theta ; \Delta \vdash \lhd I : \potvec \gens \Phi$
    
    \caseFact{2} $\Theta ; \Delta \vDash \Phi$  
    
    \caseFact{3} $\Theta ; \Delta \vdash I : \potvec \gens \Phi$
  }{
    $\Theta ; \Delta \vdash \lhd I : \potvec$
  }
  
  \caseText{By IH on (3)}
  
  \caseFact{4} $\Theta ; \Delta \vdash I : \potvec$
  
  \caseText{Goal follows by I-Shift on (4)}
}

\jcase{6}{AI-Lam}{
  \jgivengoal{
    \caseFact{1} $\Theta ; \Delta \vdash \lambda i : S. I : S \to S' \gens \forall i : S. \Phi$
    
    \caseFact{2} $\Theta ; \Delta \vDash \forall i : S. \Phi$  
    
    \caseFact{3} $\Theta, i : S ; \Delta \vdash I : S' \gens \Phi$
  }{
    $\Theta ; \Delta \vdash \lambda i : S. I : S \to S'$
  }
  
  \caseText{Equivalently to (2)}
  
  \caseFact{4} $\Theta, i : S ; \Delta \vDash \Phi$
  
  \caseText{By IH on (3) with (4)}
  
  \caseFact{5} $\Theta, i : S; \Delta \vdash I : S'$
  
  \caseText{Goal follows by I-Lam on (5)}
}

\jcase{7}{AI-App}{
  \jgivengoal{
   \caseFact{1} $\Theta ; \Delta \vdash I \; J : S' \gens \Phi_1 \wedge \Phi_2$
   
   \caseFact{2} $\Theta ; \Delta \vDash \Phi_1 \wedge \Phi_2$
   
   \caseFact{3} $\Theta ; \Delta \vdash I : S \to S' \gens \Phi_1$
   
   \caseFact{4} $\Theta ; \Delta \vdash J : S \gens \Phi_2$
  }{
    $\Theta ; \Delta \vdash I \; J : S'$  
  }
  
  \caseText{By IH on (3)}
  
  \caseFact{5} $\Theta ; \Delta \vdash I : S \to S'$
  
  \caseText{By IH on (4)}
  
  \caseFact{6} $\Theta ; \Delta \vdash J : S$
  
  \caseText{Goal follows by I-App on (5) and (6)}
}

\jcase{8}{AI-Sum}{
  \jgivengoal{
    \caseFact{1} $\Theta;\Delta \vdash \sum_{i=I_0}^{I_1} J : bS \gens \Phi_1 \wedge \Phi_2 \wedge \forall i : \N.(I_0 \leq i \leq I_1 \to \Phi_3)$
    
    \caseFact{2} $\Theta ; \Delta \vDash \Phi_1 \wedge \Phi_2 \wedge \forall i : \N.(I_0 \leq i \leq I_1 \to \Phi_3)$
    
    \caseFact{3} $\Theta;\Delta \vdash I_0 : \mathbb{N} \gens \Phi_1$
    
    \caseFact{4}  $\Theta;\Delta \vdash I_1 : \mathbb{N} \gens \Phi_2$
    
    \caseFact{5} $\Theta,i : \N;\Delta, I_0 \leq i \leq I_1 \vdash J : bS \gens \Phi_3$
  }{
     $\Theta;\Delta \vdash \sum_{i=I_0}^{I_1} J : bS$
  }
  
  \caseText{From (2)}
  
  \caseFact{6} $\Theta, i : \N ; \Delta, (I_0 \leq i \leq I_1) \vDash \Phi_3$
  
  \caseText{By IH on (5) using (6)}
  
  \caseFact{7} $\Theta,i : \N;\Delta, I_0 \leq i \leq I_1 \vdash J : bS$
  
  \caseText{By IH on (3)}
  
  \caseFact{8} $\Theta;\Delta \vdash I_0 : \mathbb{N}$
  
  \caseText{By IH on (4)}
  
  \caseFact{9} $\Theta;\Delta \vdash I_1 : \mathbb{N}$
  
  \caseText{Goal follows by I-Sum on (7), (8), (9)}
}

\jcase{9}{AI-*-Lit}{Immediate.}

}